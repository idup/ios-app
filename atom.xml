<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>iOS应用开发</title>
  <subtitle>用Swift语言写FoodTracker</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://ios-app.idup.club/"/>
  <updated>2016-03-07T03:04:10.000Z</updated>
  <id>http://ios-app.idup.club/</id>
  
  <author>
    <name>iDUP Club</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>十. 持久化数据</title>
    <link href="http://ios-app.idup.club/2015/12/04/10-Persist-data/"/>
    <id>http://ios-app.idup.club/2015/12/04/10-Persist-data/</id>
    <published>2015-12-04T04:00:00.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;保存并加载Meal&quot;&gt;&lt;a href=&quot;#保存并加载Meal&quot; class=&quot;headerlink&quot; title=&quot;保存并加载Meal&quot;&gt;&lt;/a&gt;保存并加载Meal&lt;/h3&gt;&lt;h5 id=&quot;实现代码键结构&quot;&gt;&lt;a href=&quot;#实现代码键结构&quot; class=&quot;headerlink&quot; title=&quot;实现代码键结构&quot;&gt;&lt;/a&gt;实现代码键结构&lt;/h5&gt;&lt;p&gt;打开 Meal.swift，在// MARK: Properties下面增加如下结构&lt;br&gt;&lt;figure class=&quot;highlight rust&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Types&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;PropertyKey&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; nameKey = &lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photoKey = &lt;span class=&quot;string&quot;&gt;&quot;photo&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ratingKey = &lt;span class=&quot;string&quot;&gt;&quot;rating&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在 Meal.swift中找到Meal class行,修改为&lt;br&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Meal&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;NSObject&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;NSCoding &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;实现encodeWithCoder方法&quot;&gt;&lt;a href=&quot;#实现encodeWithCoder方法&quot; class=&quot;headerlink&quot; title=&quot;实现encodeWithCoder方法&quot;&gt;&lt;/a&gt;实现encodeWithCoder方法&lt;/h5&gt;&lt;p&gt;打开Meal.swift，在代码最后一个 { 前面增加如下代码&lt;br&gt;&lt;figure class=&quot;highlight roboconf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func encodeWithCoder(aCoder: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;attribute&quot;&gt;aCoder.encodeObject(name, forKey&lt;/span&gt;: PropertyKey&lt;span class=&quot;variable&quot;&gt;.nameKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    aCoder&lt;span class=&quot;variable&quot;&gt;.encodeObject&lt;/span&gt;(photo, forKey: PropertyKey&lt;span class=&quot;variable&quot;&gt;.photoKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    aCoder&lt;span class=&quot;variable&quot;&gt;.encodeInteger&lt;/span&gt;(rating, forKey: PropertyKey&lt;span class=&quot;variable&quot;&gt;.ratingKey&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;初始化加载meal&quot;&gt;&lt;a href=&quot;#初始化加载meal&quot; class=&quot;headerlink&quot; title=&quot;初始化加载meal&quot;&gt;&lt;/a&gt;初始化加载meal&lt;/h5&gt;&lt;p&gt;在encodeWithCoder(_:)方法前，增加代码&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required convenience init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; name = aDecoder.decodeObjectForKey(PropertyKey.nameKey) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Because photo is an optional property of Meal, use conditional cast.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo = aDecoder.decodeObjectForKey(PropertyKey.photoKey) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? UIImage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; rating = aDecoder.decodeIntegerForKey(PropertyKey.ratingKey)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Must call designated initializer.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.init(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: name, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: rating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新初始化实现来调用父类的初始化&quot;&gt;&lt;a href=&quot;#更新初始化实现来调用父类的初始化&quot; class=&quot;headerlink&quot; title=&quot;更新初始化实现来调用父类的初始化&quot;&gt;&lt;/a&gt;更新初始化实现来调用父类的初始化&lt;/h5&gt;&lt;p&gt;找到initializer并修改为如下&lt;br&gt;&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;init?(&lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;: String, photo: UIImage?, &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt;: Int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialize stored properties.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.&lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.photo = photo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.&lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.init()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialization should fail if there is no name or if the rating is negative.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;name&lt;/span&gt;.isEmpty || &lt;span class=&quot;built_in&quot;&gt;rating&lt;/span&gt; &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        return &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;创建数据的文件路径&quot;&gt;&lt;a href=&quot;#创建数据的文件路径&quot; class=&quot;headerlink&quot; title=&quot;创建数据的文件路径&quot;&gt;&lt;/a&gt;创建数据的文件路径&lt;/h5&gt;&lt;p&gt;在 Meal.swift中，在 // MARK: Properties部分下面，增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight cs&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Archiving Paths&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; DocumentsDirectory = NSFileManager().URLsForDirectory(.DocumentDirectory, inDomains: .UserDomainMask).first!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; ArchiveURL = DocumentsDirectory.URLByAppendingPathComponent(&lt;span class=&quot;string&quot;&gt;&quot;meals&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;保存并加载meal列表&quot;&gt;&lt;a href=&quot;#保存并加载meal列表&quot; class=&quot;headerlink&quot; title=&quot;保存并加载meal列表&quot;&gt;&lt;/a&gt;保存并加载meal列表&lt;/h3&gt;&lt;h5 id=&quot;实现保存meal-list的方法&quot;&gt;&lt;a href=&quot;#实现保存meal-list的方法&quot; class=&quot;headerlink&quot; title=&quot;实现保存meal list的方法&quot;&gt;&lt;/a&gt;实现保存meal list的方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，在最后一个 } 前增加如下代码&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;saveMeals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; isSuccessfulSave = &lt;span class=&quot;type&quot;&gt;NSKeyedArchiver&lt;/span&gt;.archiveRootObject(meals, toFile: &lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;ArchiveURL&lt;/span&gt;.path!)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; !isSuccessfulSave &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Failed to save meals...&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;实现加载meal-list的方法&quot;&gt;&lt;a href=&quot;#实现加载meal-list的方法&quot; class=&quot;headerlink&quot; title=&quot;实现加载meal list的方法&quot;&gt;&lt;/a&gt;实现加载meal list的方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，在最后一个 } 前增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;loadMeals&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; [&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;]? &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;NSKeyedUnarchiver&lt;/span&gt;.unarchiveObjectWithFile(&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;.&lt;span class=&quot;type&quot;&gt;ArchiveURL&lt;/span&gt;.path!) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? [&lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;保存列表当用户增加。移除或者编辑meal时&quot;&gt;&lt;a href=&quot;#保存列表当用户增加。移除或者编辑meal时&quot; class=&quot;headerlink&quot; title=&quot;保存列表当用户增加。移除或者编辑meal时&quot;&gt;&lt;/a&gt;保存列表当用户增加。移除或者编辑meal时&lt;/h5&gt;&lt;p&gt;在MealTableViewController.swift中，找打unwindToMealList(_:)方法， 修改为&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@IBAction func unwindToMealList(&lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: UIStoryboardSegue) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? MealViewController, meal = &lt;span class=&quot;decorator&quot;&gt;sourceViewController.meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedIndexPath = &lt;span class=&quot;decorator&quot;&gt;tableView.indexPathForSelectedRow&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Update an existing meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals[selectedIndexPath.row] = meal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.reloadRowsAtIndexPaths([selectedIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .None)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;decorator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = NSIndexPath(&lt;span class=&quot;attribute&quot;&gt;forRow&lt;/span&gt;: meals.count, &lt;span class=&quot;attribute&quot;&gt;inSection&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.insertRowsAtIndexPaths([newIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .Bottom)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Save the meals.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        saveMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到tableView(_:commitEditingStyle:forRowAtIndexPath:) 方法，修改为&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Override to support editing the table view.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Delete&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Delete the row from the data source&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.removeAtIndex(indexPath.row)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        saveMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Fade&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Insert&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;在合适时间加载-meal-list&quot;&gt;&lt;a href=&quot;#在合适时间加载-meal-list&quot; class=&quot;headerlink&quot; title=&quot;在合适时间加载 meal list&quot;&gt;&lt;/a&gt;在合适时间加载 meal list&lt;/h5&gt;&lt;p&gt;在MealTableViewController.swift中，找到viewDidLoad() 方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Use the edit button item provided by the table view controller.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    navigationItem.leftBarButtonItem = editButtonItem()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load any saved meals, otherwise load sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; savedMeals = loadMeals() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals += savedMeals&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;保存并加载Meal&quot;&gt;&lt;a href=&quot;#保存并加载Meal&quot; class=&quot;headerlink&quot; title=&quot;保存并加载Meal&quot;&gt;&lt;/a&gt;保存并加载Meal&lt;/h3&gt;&lt;h5 id=&quot;实现代码键结构&quot;&gt;&lt;a href=&quot;#实现代码键结构&quot; class=&quot;he
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>九. 实现编辑和删除操作</title>
    <link href="http://ios-app.idup.club/2015/12/04/9-Implement-edit-and-delete-behavior/"/>
    <id>http://ios-app.idup.club/2015/12/04/9-Implement-edit-and-delete-behavior/</id>
    <published>2015-12-04T03:59:42.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;a href=&quot;#允许编辑已经存在的Meals&quot; class=&quot;headerlink&quot; title=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;/a&gt;允许编辑已经存在的Meals&lt;/h3&gt;&lt;h5 id=&quot;配置table-view单元&quot;&gt;&lt;a href=&quot;#配置table-view单元&quot; class=&quot;headerlink&quot; title=&quot;配置table view单元&quot;&gt;&lt;/a&gt;配置table view单元&lt;/h5&gt;&lt;p&gt;打开Main.storyboard，选择table view cell，按住control并把它拖到meal scene中，在出现的Selection Segue中选择show选项&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;向下拖拽在meal list和meal scene之间的navigation controller，到出现新的segue结束&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择最新添加的segue，在它的 Attributes inspector中的Identifier标签中输入ShowDetail&lt;/p&gt;
&lt;h5 id=&quot;确认哪一个segue-在发生&quot;&gt;&lt;a href=&quot;#确认哪一个segue-在发生&quot; class=&quot;headerlink&quot; title=&quot;确认哪一个segue 在发生&quot;&gt;&lt;/a&gt;确认哪一个segue 在发生&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到prepareForSegue(_:sender:)方法，并修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: - Navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// In a storyboard-based application, you will often want to do a little preparation before navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;prepareForSegue&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(segue: UIStoryboardSegue, sender: AnyObject?)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; segue.identifier == &lt;span class=&quot;string&quot;&gt;&quot;ShowDetail&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; mealDetailViewController = segue.destinationViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;MealViewController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Get the cell that generated this segue.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedMealCell = sender &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? &lt;span class=&quot;type&quot;&gt;MealTableViewCell&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; indexPath = tableView.indexPathForCell(selectedMealCell)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedMeal = meals[indexPath.row]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            mealDetailViewController.meal = selectedMeal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; segue.identifier == &lt;span class=&quot;string&quot;&gt;&quot;AddItem&quot;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Adding new meal.&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新viewDidLoad的实现&quot;&gt;&lt;a href=&quot;#更新viewDidLoad的实现&quot; class=&quot;headerlink&quot; title=&quot;更新viewDidLoad的实现&quot;&gt;&lt;/a&gt;更新viewDidLoad的实现&lt;/h5&gt;&lt;p&gt;找到 MealViewController.swift的viewDidLoad()方法，修改内容如下&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func viewDidLoad() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    super.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the text field’s user input via delegate callbacks.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField&lt;span class=&quot;selector-class&quot;&gt;.delegate&lt;/span&gt; = self&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set up views if editing an existing Meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; let meal = meal &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        navigationItem&lt;span class=&quot;selector-class&quot;&gt;.title&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        nameTextField&lt;span class=&quot;selector-class&quot;&gt;.text&lt;/span&gt;   = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        photoImageView&lt;span class=&quot;selector-class&quot;&gt;.image&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.photo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingControl&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Enable the Save button only if the text field has a valid Meal name.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    checkValidMealName()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;更新unwindToMealList-方法实现增加和更换meals&quot;&gt;&lt;a href=&quot;#更新unwindToMealList-方法实现增加和更换meals&quot; class=&quot;headerlink&quot; title=&quot;更新unwindToMealList(_:)方法实现增加和更换meals&quot;&gt;&lt;/a&gt;更新unwindToMealList(_:)方法实现增加和更换meals&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift.找到unwindToMealList(_:)方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;@IBAction func unwindToMealList(&lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: UIStoryboardSegue) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? MealViewController, meal = &lt;span class=&quot;decorator&quot;&gt;sourceViewController.meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedIndexPath = &lt;span class=&quot;decorator&quot;&gt;tableView.indexPathForSelectedRow&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Update an existing meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals[selectedIndexPath.row] = meal&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.reloadRowsAtIndexPaths([selectedIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .None)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;decorator&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = NSIndexPath(&lt;span class=&quot;attribute&quot;&gt;forRow&lt;/span&gt;: meals.count, &lt;span class=&quot;attribute&quot;&gt;inSection&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            tableView.insertRowsAtIndexPaths([newIndexPath], &lt;span class=&quot;attribute&quot;&gt;withRowAnimation&lt;/span&gt;: .Bottom)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;取消已存在的meal的编辑&quot;&gt;&lt;a href=&quot;#取消已存在的meal的编辑&quot; class=&quot;headerlink&quot; title=&quot;取消已存在的meal的编辑&quot;&gt;&lt;/a&gt;取消已存在的meal的编辑&lt;/h3&gt;&lt;h5 id=&quot;改变cancel动作的实现&quot;&gt;&lt;a href=&quot;#改变cancel动作的实现&quot; class=&quot;headerlink&quot; title=&quot;改变cancel动作的实现&quot;&gt;&lt;/a&gt;改变cancel动作的实现&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift，找到cancel(_:)方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;cancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UIBarButtonItem)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Depending on style of presentation (modal or push presentation), this view controller needs to be dismissed in two different ways.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; isPresentingInAddMealMode = presentingViewController &lt;span class=&quot;keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;UINavigationController&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; isPresentingInAddMealMode &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        navigationController!.popViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;支持meals-删除&quot;&gt;&lt;a href=&quot;#支持meals-删除&quot; class=&quot;headerlink&quot; title=&quot;支持meals 删除&quot;&gt;&lt;/a&gt;支持meals 删除&lt;/h3&gt;&lt;h5 id=&quot;在table-view中增加编辑按钮&quot;&gt;&lt;a href=&quot;#在table-view中增加编辑按钮&quot; class=&quot;headerlink&quot; title=&quot;在table view中增加编辑按钮&quot;&gt;&lt;/a&gt;在table view中增加编辑按钮&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到viewDidLoad() 方法，修改为如下&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Use the edit button item provided by the table view controller.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    navigationItem.leftBarButtonItem = editButtonItem()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;删除一个meal&quot;&gt;&lt;a href=&quot;#删除一个meal&quot; class=&quot;headerlink&quot; title=&quot;删除一个meal&quot;&gt;&lt;/a&gt;删除一个meal&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift，找到tableView(_:commitEditingStyle:forRowAtIndexPath:)方法，修改为&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Override to support editing the table view.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, commitEditingStyle editingStyle: UITableViewCellEditingStyle, forRowAtIndexPath indexPath: NSIndexPath)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Delete&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Delete the row from the data source&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.removeAtIndex(indexPath.row)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.deleteRowsAtIndexPaths([indexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Fade&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; editingStyle == .&lt;span class=&quot;type&quot;&gt;Insert&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/9-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;a href=&quot;#允许编辑已经存在的Meals&quot; class=&quot;headerlink&quot; title=&quot;允许编辑已经存在的Meals&quot;&gt;&lt;/a&gt;允许编辑已经存在的Meals&lt;/h3&gt;&lt;h5 id=&quot;配置table-view单元&quot;&gt;&lt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>八. 实现导航</title>
    <link href="http://ios-app.idup.club/2015/12/04/8-Implement-navigation/"/>
    <id>http://ios-app.idup.club/2015/12/04/8-Implement-navigation/</id>
    <published>2015-12-04T03:59:23.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;添加一个向前导航&quot;&gt;&lt;a href=&quot;#添加一个向前导航&quot; class=&quot;headerlink&quot; title=&quot;添加一个向前导航&quot;&gt;&lt;/a&gt;添加一个向前导航&lt;/h3&gt;&lt;p&gt;现在需要添加meal list到meal scene的导航&lt;/p&gt;
&lt;h5 id=&quot;增加一个navigation-controller指向meal-list-scene&quot;&gt;&lt;a href=&quot;#增加一个navigation-controller指向meal-list-scene&quot; class=&quot;headerlink&quot; title=&quot;增加一个navigation controller指向meal list scene&quot;&gt;&lt;/a&gt;增加一个navigation controller指向meal list scene&lt;/h5&gt;&lt;p&gt;打开storyboard，点击scene dock来选择table view controller,保持选择状态依次点击Editor &amp;gt; Embed In &amp;gt; Navigation Controller.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;为视图添加导航栏&quot;&gt;&lt;a href=&quot;#为视图添加导航栏&quot; class=&quot;headerlink&quot; title=&quot;为视图添加导航栏&quot;&gt;&lt;/a&gt;为视图添加导航栏&lt;/h3&gt;&lt;h5 id=&quot;为meal-list配置导航栏&quot;&gt;&lt;a href=&quot;#为meal-list配置导航栏&quot; class=&quot;headerlink&quot; title=&quot;为meal list配置导航栏&quot;&gt;&lt;/a&gt;为meal list配置导航栏&lt;/h5&gt;&lt;p&gt;双击meal list scene的 navigation bar，输入Your meals&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Object library中选择Bar Button Item，拖放到meal scene的右上角&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择它的 Attributes inspector,从菜单中选择Add，这个btton就会变成增加按钮&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;在meal-scene中添加add按钮&quot;&gt;&lt;a href=&quot;#在meal-scene中添加add按钮&quot; class=&quot;headerlink&quot; title=&quot;在meal scene中添加add按钮&quot;&gt;&lt;/a&gt;在meal scene中添加add按钮&lt;/h5&gt;&lt;p&gt;选择add button(+)，按住control键并拖入meal scene中，出现一个Action Segue菜单，选择show选项&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行app,点击add 按钮，并导航至meal scene&lt;/p&gt;
&lt;h5 id=&quot;改变segue-style&quot;&gt;&lt;a href=&quot;#改变segue-style&quot; class=&quot;headerlink&quot; title=&quot;改变segue style&quot;&gt;&lt;/a&gt;改变segue style&lt;/h5&gt;&lt;p&gt;选择segue，在它的Attributes inspector中选择 Present Modally，在Identifier标签上选择AddItem&lt;/p&gt;
&lt;h5 id=&quot;给meal-scene增加一个navigation-controller&quot;&gt;&lt;a href=&quot;#给meal-scene增加一个navigation-controller&quot; class=&quot;headerlink&quot; title=&quot;给meal scene增加一个navigation controller&quot;&gt;&lt;/a&gt;给meal scene增加一个navigation controller&lt;/h5&gt;&lt;p&gt;选择meal scene，依次点击Editor &amp;gt; Embed In &amp;gt; Navigation Controller.&lt;/p&gt;
&lt;h5 id=&quot;在meal-scene中配置导航栏&quot;&gt;&lt;a href=&quot;#在meal-scene中配置导航栏&quot; class=&quot;headerlink&quot; title=&quot;在meal scene中配置导航栏&quot;&gt;&lt;/a&gt;在meal scene中配置导航栏&lt;/h5&gt;&lt;p&gt;双击navigation bar，输入New Meal保存，从 Object library中拖一个 Bar Button Item放在meal scene的导航栏上，在Attributes inspector中选择 Cancel&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;拖拽另一个Bar Button Item放在meal scene的导航栏上，在Attributes inspector上选择save&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行app&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;最后确定自动布局的界面&quot;&gt;&lt;a href=&quot;#最后确定自动布局的界面&quot; class=&quot;headerlink&quot; title=&quot;最后确定自动布局的界面&quot;&gt;&lt;/a&gt;最后确定自动布局的界面&lt;/h3&gt;&lt;h5 id=&quot;更新stack-view的布局&quot;&gt;&lt;a href=&quot;#更新stack-view的布局&quot; class=&quot;headerlink&quot; title=&quot;更新stack view的布局&quot;&gt;&lt;/a&gt;更新stack view的布局&lt;/h5&gt;&lt;p&gt;点击meal scene中的蔚蓝色区域以选择stack view，在canvas的右下角，打开Resolve Auto Layout Issues菜单，选择Update Constraints&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;在Meal-List中存储新的Meals&quot;&gt;&lt;a href=&quot;#在Meal-List中存储新的Meals&quot; class=&quot;headerlink&quot; title=&quot;在Meal List中存储新的Meals&quot;&gt;&lt;/a&gt;在Meal List中存储新的Meals&lt;/h3&gt;&lt;h5 id=&quot;在MealViewController中增加一个Meal属性&quot;&gt;&lt;a href=&quot;#在MealViewController中增加一个Meal属性&quot; class=&quot;headerlink&quot; title=&quot;在MealViewController中增加一个Meal属性&quot;&gt;&lt;/a&gt;在MealViewController中增加一个Meal属性&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift.在ratingControl下增加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight ocaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;/*&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;This&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;value&lt;/span&gt; is either passed by &lt;span class=&quot;type&quot;&gt;`MealTableViewController&lt;/span&gt;` &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; `prepareForSegue(_:sender:)`&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;or&lt;/span&gt; constructed &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; part &lt;span class=&quot;keyword&quot;&gt;of&lt;/span&gt; adding a &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; meal.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;*/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var meal: &lt;span class=&quot;type&quot;&gt;Meal&lt;/span&gt;?&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;建立save按钮与MealViewController代码的连接&quot;&gt;&lt;a href=&quot;#建立save按钮与MealViewController代码的连接&quot; class=&quot;headerlink&quot; title=&quot;建立save按钮与MealViewController代码的连接&quot;&gt;&lt;/a&gt;建立save按钮与MealViewController代码的连接&lt;/h5&gt;&lt;p&gt;打开storyboard，将save 按钮拖至MealViewController.swift代码的ratingControl属性下面，name设置为saveButton&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-15.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-16.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建一个松开-Segue&quot;&gt;&lt;a href=&quot;#创建一个松开-Segue&quot; class=&quot;headerlink&quot; title=&quot;创建一个松开 Segue&quot;&gt;&lt;/a&gt;创建一个松开 Segue&lt;/h3&gt;&lt;h5 id=&quot;在MealViewController中实现prepareForSegue-sender-方法&quot;&gt;&lt;a href=&quot;#在MealViewController中实现prepareForSegue-sender-方法&quot; class=&quot;headerlink&quot; title=&quot;在MealViewController中实现prepareForSegue(_:sender:) 方法&quot;&gt;&lt;/a&gt;在MealViewController中实现prepareForSegue(_:sender:) 方法&lt;/h5&gt;&lt;p&gt;打开MealViewController.swift，在// MARK: Actions上面，添加&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Navigation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// This method lets you configure a view controller before it&#39;s presented.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;override func prepareForSegue(&lt;span class=&quot;attribute&quot;&gt;segue&lt;/span&gt;: UIStoryboardSegue, &lt;span class=&quot;attribute&quot;&gt;sender&lt;/span&gt;: AnyObject?) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; saveButton === &lt;span class=&quot;decorator&quot;&gt;sender&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; name = nameTextField.text ?? &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo = photoImageView.image&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; rating = ratingControl.rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Set the meal to be passed to MealTableViewController after the unwind segue.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meal = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: name, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: rating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;给MealTableViewController添加动作方法&quot;&gt;&lt;a href=&quot;#给MealTableViewController添加动作方法&quot; class=&quot;headerlink&quot; title=&quot;给MealTableViewController添加动作方法&quot;&gt;&lt;/a&gt;给MealTableViewController添加动作方法&lt;/h5&gt;&lt;p&gt;打开MealTableViewController.swift.在最后一个 } 前添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;unwindToMealList&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UIStoryboardSegue)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; sourceViewController = sender.sourceViewController &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;? &lt;span class=&quot;type&quot;&gt;MealViewController&lt;/span&gt;, meal = sourceViewController.meal &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Add a new meal.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; newIndexPath = &lt;span class=&quot;type&quot;&gt;NSIndexPath&lt;/span&gt;(forRow: meals.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;, inSection: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        meals.append(meal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        tableView.insertRowsAtIndexPaths([newIndexPath], withRowAnimation: .&lt;span class=&quot;type&quot;&gt;Bottom&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;将save按钮与unwindToMealList-方法建立连接&quot;&gt;&lt;a href=&quot;#将save按钮与unwindToMealList-方法建立连接&quot; class=&quot;headerlink&quot; title=&quot;将save按钮与unwindToMealList 方法建立连接&quot;&gt;&lt;/a&gt;将save按钮与unwindToMealList 方法建立连接&lt;/h5&gt;&lt;p&gt;打开storyboard，按住control键拖拽Save 按钮到meal scene上面的 Exit 按钮，在出现的菜单中选择unwindToMealList:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-18.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;当用户没有输入名字时不能存储&quot;&gt;&lt;a href=&quot;#当用户没有输入名字时不能存储&quot; class=&quot;headerlink&quot; title=&quot;当用户没有输入名字时不能存储&quot;&gt;&lt;/a&gt;当用户没有输入名字时不能存储&lt;/h3&gt;&lt;h5 id=&quot;没有名字，不能使用save按钮&quot;&gt;&lt;a href=&quot;#没有名字，不能使用save按钮&quot; class=&quot;headerlink&quot; title=&quot;没有名字，不能使用save按钮&quot;&gt;&lt;/a&gt;没有名字，不能使用save按钮&lt;/h5&gt;&lt;p&gt;在MealViewController.swift中找到&lt;br&gt;&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: UITextFieldDelegate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在这个部分添加另一个方法&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;textFieldDidBeginEditing&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(textField: UITextField)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Disable the Save button while editing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    saveButton.enabled = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在textFieldDidBeginEditing(_:)方法之后添加另一个方法&lt;br&gt;&lt;figure class=&quot;highlight openscad&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func checkValidMealName() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Disable the Save button if the text field is empty.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt; = nameTextField.&lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt; ?? &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    saveButton.enabled = !&lt;span class=&quot;built_in&quot;&gt;text&lt;/span&gt;.isEmpty&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到textFieldDidEndEditing(_:)方法，向其中添加&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;checkValidMealName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;navigationItem&lt;span class=&quot;selector-class&quot;&gt;.title&lt;/span&gt; = textField.text&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;找到viewDidLoad() 方法，向其中添加&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Enable the Save button only if the text field has a valid Meal name.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;checkValidMealName&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;取消新增的meal&quot;&gt;&lt;a href=&quot;#取消新增的meal&quot; class=&quot;headerlink&quot; title=&quot;取消新增的meal&quot;&gt;&lt;/a&gt;取消新增的meal&lt;/h3&gt;&lt;h5 id=&quot;创建并是吸纳一个取消动作方法&quot;&gt;&lt;a href=&quot;#创建并是吸纳一个取消动作方法&quot; class=&quot;headerlink&quot; title=&quot;创建并是吸纳一个取消动作方法&quot;&gt;&lt;/a&gt;创建并是吸纳一个取消动作方法&lt;/h5&gt;&lt;p&gt;选择Cancel button，将其拖入MealViewController.swift代码区域的// MARK: Navigation下面，name 设置为cancel，type设置为UIBarButtonItem.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/8-20.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在cancel(_:)中添加&lt;br&gt;&lt;figure class=&quot;highlight lisp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dismissViewControllerAnimated(&lt;span class=&quot;name&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;添加一个向前导航&quot;&gt;&lt;a href=&quot;#添加一个向前导航&quot; class=&quot;headerlink&quot; title=&quot;添加一个向前导航&quot;&gt;&lt;/a&gt;添加一个向前导航&lt;/h3&gt;&lt;p&gt;现在需要添加meal list到meal scene的导航&lt;/p&gt;
&lt;h5 id=&quot;增加一个
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>七. 创建表视图</title>
    <link href="http://ios-app.idup.club/2015/12/04/7-Create-a-table-view/"/>
    <id>http://ios-app.idup.club/2015/12/04/7-Create-a-table-view/</id>
    <published>2015-12-04T03:59:11.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建开放视图&quot;&gt;&lt;a href=&quot;#创建开放视图&quot; class=&quot;headerlink&quot; title=&quot;创建开放视图&quot;&gt;&lt;/a&gt;创建开放视图&lt;/h3&gt;&lt;p&gt;目前，FoodTracker app只有一个通过view controller管理的视图，还需要创建meals的列表，IOS内置了表视图类UITableView来展示这种项目滑动列表&lt;/p&gt;
&lt;h5 id=&quot;在storyboard中添加一个表视图&quot;&gt;&lt;a href=&quot;#在storyboard中添加一个表视图&quot; class=&quot;headerlink&quot; title=&quot;在storyboard中添加一个表视图&quot;&gt;&lt;/a&gt;在storyboard中添加一个表视图&lt;/h5&gt;&lt;p&gt;在Object libray中找到Table View Controller对象，拖拽它把它放置在meal视图的左边，这时就有两个视图，一个用来用来添加meal，一个用来展示meal 列表&lt;/p&gt;
&lt;h5 id=&quot;将table-view-controller设置为初始视图&quot;&gt;&lt;a href=&quot;#将table-view-controller设置为初始视图&quot; class=&quot;headerlink&quot; title=&quot;将table view controller设置为初始视图&quot;&gt;&lt;/a&gt;将table view controller设置为初始视图&lt;/h5&gt;&lt;p&gt;拖拽指向view Controller的箭头，将它指向table view controller&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;配置table-view&quot;&gt;&lt;a href=&quot;#配置table-view&quot; class=&quot;headerlink&quot; title=&quot;配置table view&quot;&gt;&lt;/a&gt;配置table view&lt;/h5&gt;&lt;p&gt;在 outline view中选择Table View，打开Size inspector,找到Row Height标签，设置为90&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设计自定义的表单元&quot;&gt;&lt;a href=&quot;#设计自定义的表单元&quot; class=&quot;headerlink&quot; title=&quot;设计自定义的表单元&quot;&gt;&lt;/a&gt;设计自定义的表单元&lt;/h3&gt;&lt;h5 id=&quot;创建UITableViewCell的子类&quot;&gt;&lt;a href=&quot;#创建UITableViewCell的子类&quot; class=&quot;headerlink&quot; title=&quot;创建UITableViewCell的子类&quot;&gt;&lt;/a&gt;创建UITableViewCell的子类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File ，选择ios下面的Source选项，选择 Cocoa Touch Class，点击next，Class中填入Meal,subclass of中选择UITableViewCell，然后一只默认设置到创建结束。&lt;/p&gt;
&lt;h5 id=&quot;为table-view配置自定义单元&quot;&gt;&lt;a href=&quot;#为table-view配置自定义单元&quot; class=&quot;headerlink&quot; title=&quot;为table view配置自定义单元&quot;&gt;&lt;/a&gt;为table view配置自定义单元&lt;/h5&gt;&lt;p&gt;在outline中选择Table View Cell，打开它的Attributes inspector，找到 Identifier标签，输入MealTableViewCell。找到 Selection标签，选择None，打开 Size inspector，找到Row Height标签，输入90，打开Identity inspector，在Class标签中选择 MealTableViewCell.&lt;/p&gt;
&lt;h5 id=&quot;为自定义的table单元设计接口&quot;&gt;&lt;a href=&quot;#为自定义的table单元设计接口&quot; class=&quot;headerlink&quot; title=&quot;为自定义的table单元设计接口&quot;&gt;&lt;/a&gt;为自定义的table单元设计接口&lt;/h5&gt;&lt;p&gt;依次点击 Editor &amp;gt; Canvas &amp;gt; Show Bounds Rectangles，&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在Object library中选择Image View，拖拽它到表单元&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开image view的 Attributes inspector,选择 Image标签设置为defaultPhoto，在Object library中选择Label，拖拽它到表单元，挡在image view的右边&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;重新设置label的大小&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从Object library中选择View ，拖拽到表单元，打开它的Size inspector,设置 Height和Width 分别为40，240，打开它的Identity inspector，设置 Class为RatingControl。打开Attributes inspector，找到 Interaction标签，撤销User Interaction Enabled&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行虚拟机&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;向项目中添加图片&quot;&gt;&lt;a href=&quot;#向项目中添加图片&quot; class=&quot;headerlink&quot; title=&quot;向项目中添加图片&quot;&gt;&lt;/a&gt;向项目中添加图片&lt;/h3&gt;&lt;p&gt;打开 project navigator中的Assets.xcassets，添加一个文件夹，命名为Sample Images，在这个文件夹下添加New Image Set ，向其中添加图片。可以新建多个New Image Set。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;table单元和代码建立连接&quot;&gt;&lt;a href=&quot;#table单元和代码建立连接&quot; class=&quot;headerlink&quot; title=&quot;table单元和代码建立连接&quot;&gt;&lt;/a&gt;table单元和代码建立连接&lt;/h3&gt;&lt;h5 id=&quot;建立视图和MealTableViewCell-swift代码的连接&quot;&gt;&lt;a href=&quot;#建立视图和MealTableViewCell-swift代码的连接&quot; class=&quot;headerlink&quot; title=&quot;建立视图和MealTableViewCell.swift代码的连接&quot;&gt;&lt;/a&gt;建立视图和MealTableViewCell.swift代码的连接&lt;/h5&gt;&lt;p&gt;拖拽table 单元中的label到MealTableViewCell.swift的代码区，name 设置为nameLabel&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-14.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;拖拽table单元中的image view到 MealTableViewCell.swift代码区，位置放在刚刚建立的nameLabel属性下面，name设置为photoImageView&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-15.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;选择table view单元中的rating control，拖拽它到MealTableViewCell.swift代码区的photoImageView属性下。name设置为ratingControl&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-16.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-17.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;加载初始数据&quot;&gt;&lt;a href=&quot;#加载初始数据&quot; class=&quot;headerlink&quot; title=&quot;加载初始数据&quot;&gt;&lt;/a&gt;加载初始数据&lt;/h3&gt;&lt;h5 id=&quot;创建UITableViewController的子类&quot;&gt;&lt;a href=&quot;#创建UITableViewController的子类&quot; class=&quot;headerlink&quot; title=&quot;创建UITableViewController的子类&quot;&gt;&lt;/a&gt;创建UITableViewController的子类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File，选择ios下的Source选项，选择Cocoa Touch Class，点击next,Class填入Meal,subclass of填入UITableViewController，确保Also create XIB file设置为unselected状态，点击创建。&lt;/p&gt;
&lt;h5 id=&quot;加载初始数据-1&quot;&gt;&lt;a href=&quot;#加载初始数据-1&quot; class=&quot;headerlink&quot; title=&quot;加载初始数据&quot;&gt;&lt;/a&gt;加载初始数据&lt;/h5&gt;&lt;p&gt;在 MealTableViewController.swift代码区的class行下面添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight markdown&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;var meals = [&lt;span class=&quot;string&quot;&gt;Meal&lt;/span&gt;](&lt;span class=&quot;link&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在viewDidLoad() 方法后面，添加如下方法&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func loadSampleMeals() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo1 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal1&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal1 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Caprese Salad&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo1, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo2 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal2&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal2 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Chicken and Potatoes&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo2, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; photo3 = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;meal3&quot;&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; meal3 = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Pasta with Meatballs&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: photo3, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;)!&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    meals += [meal1, meal2, meal3]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;viewDidLoad()方法添加相关代码加载数据&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Load the sample data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    loadSampleMeals()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;呈现数据&quot;&gt;&lt;a href=&quot;#呈现数据&quot; class=&quot;headerlink&quot; title=&quot;呈现数据&quot;&gt;&lt;/a&gt;呈现数据&lt;/h3&gt;&lt;h5 id=&quot;呈现table-view的部分&quot;&gt;&lt;a href=&quot;#呈现table-view的部分&quot; class=&quot;headerlink&quot; title=&quot;呈现table view的部分&quot;&gt;&lt;/a&gt;呈现table view的部分&lt;/h5&gt;&lt;p&gt;修改MealTableViewController.swift代码中numberOfSectionsInTableView(_:)方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;tableView&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(tableView: UITableView, numberOfRowsInSection section: Int)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; meals.&lt;span class=&quot;built_in&quot;&gt;count&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;配置并呈现table-view中的单元&quot;&gt;&lt;a href=&quot;#配置并呈现table-view中的单元&quot; class=&quot;headerlink&quot; title=&quot;配置并呈现table view中的单元&quot;&gt;&lt;/a&gt;配置并呈现table view中的单元&lt;/h5&gt;&lt;p&gt;找到tableviewf方法将其改成如下形式&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func tableView(tableView: UITableView, cellForRowAtIndexPath indexPath: NSIndexPath) -&amp;gt; UITableViewCell &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Table view cells are reused and should be dequeued using a cell identifier.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let cellIdentifier = &lt;span class=&quot;string&quot;&gt;&quot;MealTableViewCell&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let cell = tableView.dequeueReusableCellWithIdentifier(cellIdentifier, forIndexPath: indexPath) as! MealTableViewCell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Fetches the appropriate meal for the data source layout.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    let meal = meals[indexPath.row]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.nameLabel&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.text&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.photoImageView&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.image&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.photo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    cell&lt;span class=&quot;selector-class&quot;&gt;.ratingControl&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt; = meal&lt;span class=&quot;selector-class&quot;&gt;.rating&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    return cell&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;将table-view-controller-scene指向MealTableViewController-swift&quot;&gt;&lt;a href=&quot;#将table-view-controller-scene指向MealTableViewController-swift&quot; class=&quot;headerlink&quot; title=&quot;将table view controller scene指向MealTableViewController.swift&quot;&gt;&lt;/a&gt;将table view controller scene指向MealTableViewController.swift&lt;/h5&gt;&lt;p&gt;点击view controller的scene dock,打开Identity inspector，class标签选择MealTableViewController.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-18.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;准备导航视图&quot;&gt;&lt;a href=&quot;#准备导航视图&quot; class=&quot;headerlink&quot; title=&quot;准备导航视图&quot;&gt;&lt;/a&gt;准备导航视图&lt;/h3&gt;&lt;h5 id=&quot;清理工程中无用的项目&quot;&gt;&lt;a href=&quot;#清理工程中无用的项目&quot; class=&quot;headerlink&quot; title=&quot;清理工程中无用的项目&quot;&gt;&lt;/a&gt;清理工程中无用的项目&lt;/h5&gt;&lt;p&gt;选择Meal Name 标签，并删除它&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-19.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/7-20.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开ViewController.swift，找到 textFieldDidEndEditing(_:)方法，删除方法中的如下代码&lt;br&gt;&lt;figure class=&quot;highlight mel&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;mealNameLabel.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;删除ViewController.swift中的&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; mealNameLabel: &lt;span class=&quot;type&quot;&gt;UILabel&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;重命名ViewController-swift文件&quot;&gt;&lt;a href=&quot;#重命名ViewController-swift文件&quot; class=&quot;headerlink&quot; title=&quot;重命名ViewController.swift文件&quot;&gt;&lt;/a&gt;重命名ViewController.swift文件&lt;/h5&gt;&lt;p&gt;点击ViewController.swift，重命名为MealViewController.swift，将代码区的类声明作如下修改&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;MealViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UITextFieldDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UIImagePickerControllerDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UINavigationControllerDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在文件的上面部分将ViewController.swift 改为MealViewController.swift.&lt;/p&gt;
&lt;p&gt;点击meal secen的scene dock，打开Identity inspector，将class改为MealViewController&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建开放视图&quot;&gt;&lt;a href=&quot;#创建开放视图&quot; class=&quot;headerlink&quot; title=&quot;创建开放视图&quot;&gt;&lt;/a&gt;创建开放视图&lt;/h3&gt;&lt;p&gt;目前，FoodTracker app只有一个通过view controller管理的视图，还需要创建meal
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>六. 定义数据模型</title>
    <link href="http://ios-app.idup.club/2015/12/04/6-Define-your-data-model/"/>
    <id>http://ios-app.idup.club/2015/12/04/6-Define-your-data-model/</id>
    <published>2015-12-04T03:58:51.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建数据模型&quot;&gt;&lt;a href=&quot;#创建数据模型&quot; class=&quot;headerlink&quot; title=&quot;创建数据模型&quot;&gt;&lt;/a&gt;创建数据模型&lt;/h3&gt;&lt;p&gt;现在需要创建一个数据模型去存储 meal scene呈现的信息&lt;/p&gt;
&lt;h5 id=&quot;创建一个简单的数据模型类&quot;&gt;&lt;a href=&quot;#创建一个简单的数据模型类&quot; class=&quot;headerlink&quot; title=&quot;创建一个简单的数据模型类&quot;&gt;&lt;/a&gt;创建一个简单的数据模型类&lt;/h5&gt;&lt;p&gt;依次点击File &amp;gt; New &amp;gt; File，选择ios下的source选项，选择Swift File,点击next，相关配置如下，点击完成，就创建了一个名为Meal.swift的文件&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;为meal定义一个数据模型&quot;&gt;&lt;a href=&quot;#为meal定义一个数据模型&quot; class=&quot;headerlink&quot; title=&quot;为meal定义一个数据模型&quot;&gt;&lt;/a&gt;为meal定义一个数据模型&lt;/h5&gt;&lt;p&gt;打开Meal.swift.将import Foundation改为import UIKit&lt;/p&gt;
&lt;p&gt;在import声明下，添加如下代码&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class &lt;span class=&quot;decorator&quot;&gt;Meal&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: UIImage?&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: Int&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Initialization&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;init?(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: UIImage?, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: Int) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialize stored properties.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.name = name&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.photo = photo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    self.rating = rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Initialization should fail if there is no name or if the rating is negative.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; name.isEmpty || rating &amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; nil&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;测试数据&quot;&gt;&lt;a href=&quot;#测试数据&quot; class=&quot;headerlink&quot; title=&quot;测试数据&quot;&gt;&lt;/a&gt;测试数据&lt;/h3&gt;&lt;p&gt;定义了数据模型，还没有完全并入你的app,你也不能保证所有的实现都是正确的，这时就可以通过单元测试来检验代码的正确性。&lt;/p&gt;
&lt;h5 id=&quot;查看单元测试文件&quot;&gt;&lt;a href=&quot;#查看单元测试文件&quot; class=&quot;headerlink&quot; title=&quot;查看单元测试文件&quot;&gt;&lt;/a&gt;查看单元测试文件&lt;/h5&gt;&lt;p&gt;&lt;img src=&quot;/images/6-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;编写单元测试&quot;&gt;&lt;a href=&quot;#编写单元测试&quot; class=&quot;headerlink&quot; title=&quot;编写单元测试&quot;&gt;&lt;/a&gt;编写单元测试&lt;/h5&gt;&lt;p&gt;打开FoodTrackerTests.swift文件，删除模板测试代码，修改为如下测试代码&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Tests to confirm that the Meal initializer returns when no name or a negative rating is provided.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;func testMealInitialization() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Success case.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; potentialItem = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Newest meal&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNotNil(potentialItem)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Failure cases.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; noName = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNil(noName, &lt;span class=&quot;string&quot;&gt;&quot;Empty name is invalid&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; badRating = Meal(&lt;span class=&quot;attribute&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;Really bad rating&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;photo&lt;/span&gt;: nil, &lt;span class=&quot;attribute&quot;&gt;rating&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    XCTAssertNotNil(badRating)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;运行testMealInitialization-单元测试&quot;&gt;&lt;a href=&quot;#运行testMealInitialization-单元测试&quot; class=&quot;headerlink&quot; title=&quot;运行testMealInitialization() 单元测试&quot;&gt;&lt;/a&gt;运行testMealInitialization() 单元测试&lt;/h5&gt;&lt;p&gt;在FoodTrackerTests.swift文件中找到testMealInitialization()单元，在测试名字左边找到一个棱形形状的标签，点击标签运行单元测试。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;修改测试案例&quot;&gt;&lt;a href=&quot;#修改测试案例&quot; class=&quot;headerlink&quot; title=&quot;修改测试案例&quot;&gt;&lt;/a&gt;修改测试案例&lt;/h5&gt;&lt;p&gt;找到testMealInitialization()的最后一行，修改为&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;title&quot;&gt;XCTAssertNil&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(badRating, &lt;span class=&quot;string&quot;&gt;&quot;Negative ratings are invalid, be positive&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重新运行，所有样例都能测试通过&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/6-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建数据模型&quot;&gt;&lt;a href=&quot;#创建数据模型&quot; class=&quot;headerlink&quot; title=&quot;创建数据模型&quot;&gt;&lt;/a&gt;创建数据模型&lt;/h3&gt;&lt;p&gt;现在需要创建一个数据模型去存储 meal scene呈现的信息&lt;/p&gt;
&lt;h5 id=&quot;创建一个简单的数据模
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>五. 实现自定义控件</title>
    <link href="http://ios-app.idup.club/2015/12/04/5-Implement-a-custom-control/"/>
    <id>http://ios-app.idup.club/2015/12/04/5-Implement-a-custom-control/</id>
    <published>2015-12-04T03:58:40.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;创建自定义视图&quot;&gt;&lt;a href=&quot;#创建自定义视图&quot; class=&quot;headerlink&quot; title=&quot;创建自定义视图&quot;&gt;&lt;/a&gt;创建自定义视图&lt;/h3&gt;&lt;p&gt;点击File &amp;gt; New &amp;gt; File ，选择ios下的source选项，选择Cocoa Touch Class，点击next，Class设置为RatingControl，“Subclass of”选择UIView,Language选择Swift&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在RatingControl.swift代码区的class里添加代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;required&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;?(coder aDecoder: &lt;span class=&quot;type&quot;&gt;NSCoder&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(coder: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;显示自定义视图&quot;&gt;&lt;a href=&quot;#显示自定义视图&quot; class=&quot;headerlink&quot; title=&quot;显示自定义视图&quot;&gt;&lt;/a&gt;显示自定义视图&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个View,将其放置在image view下面，打开它的Size inspector，Intrinsic Size标签设置为Placeholder，宽和高分别设置为44和240,打开它的 Identity inspector，class标签选择RatingControl.&lt;/p&gt;
&lt;h3 id=&quot;向视图添加button按钮&quot;&gt;&lt;a href=&quot;#向视图添加button按钮&quot; class=&quot;headerlink&quot; title=&quot;向视图添加button按钮&quot;&gt;&lt;/a&gt;向视图添加button按钮&lt;/h3&gt;&lt;p&gt;在RatingControl.swift代码区添加如下代码，用于创建一个红色按钮&lt;br&gt;&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;调整红色按钮的布局，重写intrinsicContentSize方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;intrinsicContentSize&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;type&quot;&gt;CGSize&lt;/span&gt;(width: &lt;span class=&quot;number&quot;&gt;240&lt;/span&gt;, height: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;为了向button按钮添加动作，在 RatingControl.swift代码区最后一个 } 前添加如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Button Action&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ratingButtonTapped&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(button: UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;print&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&quot;Button pressed 👍&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;修改init?(coder:)函数如下&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;定义属性和5个button，重写layoutSubviews()方法&lt;/p&gt;
&lt;figure class=&quot;highlight http&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;super.init(coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;qml&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton(&lt;span class=&quot;attribute&quot;&gt;frame&lt;/span&gt;: CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   override func layoutSubviews() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;built_in&quot;&gt;var&lt;/span&gt; buttonFrame = CGRect(&lt;span class=&quot;attribute&quot;&gt;x&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;y&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;44&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.enumerate() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           buttonFrame.origin.x = CGFloat(index * (&lt;span class=&quot;number&quot;&gt;44&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;为button大小声明约束-相应代码修改如下&quot;&gt;&lt;a href=&quot;#为button大小声明约束-相应代码修改如下&quot; class=&quot;headerlink&quot; title=&quot;为button大小声明约束,相应代码修改如下&quot;&gt;&lt;/a&gt;为button大小声明约束,相应代码修改如下&lt;/h3&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;layoutSubviews&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set the button&#39;s width and height to a square the size of the frame&#39;s height.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; buttonSize = &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;(frame.size.height)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buttonFrame = &lt;span class=&quot;type&quot;&gt;CGRect&lt;/span&gt;(x: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, width: buttonSize, height: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus some spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.&lt;span class=&quot;built_in&quot;&gt;enumerate&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buttonFrame.origin.x = &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;(index * (buttonSize + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight maxima&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;override func intrinsicContentSize() -&amp;gt; CGSize &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; buttonSize = Int(frame.size.&lt;span class=&quot;built_in&quot;&gt;height&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt; = (buttonSize + spacing) * stars&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;return&lt;/span&gt; CGSize(&lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;width&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;height&lt;/span&gt;: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.backgroundColor = UIColor.redColor()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;向Buttons中添加star图片&quot;&gt;&lt;a href=&quot;#向Buttons中添加star图片&quot; class=&quot;headerlink&quot; title=&quot;向Buttons中添加star图片&quot;&gt;&lt;/a&gt;向Buttons中添加star图片&lt;/h3&gt;&lt;p&gt;在project navigator中选择Assets.xcassets,点击(+)按钮并创建一个文件夹，将文件夹命名Rating Images。在这个文件夹下创建两个Image Set，分别命名为emptyStar， filledStar，并将图片拖拽到相应位置&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;为buttons设置成星星图片，修改RatingControl.swift中代码&lt;/p&gt;
&lt;figure class=&quot;highlight qml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;required init?(coder &lt;span class=&quot;attribute&quot;&gt;aDecoder&lt;/span&gt;: NSCoder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.init(&lt;span class=&quot;attribute&quot;&gt;coder&lt;/span&gt;: aDecoder)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; emptyStarImage = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;emptyStar&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; filledStarImage = UIImage(&lt;span class=&quot;attribute&quot;&gt;named&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;filledStar&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; _ &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;0.&lt;/span&gt;.&amp;lt;&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; button = UIButton()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(emptyStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: .Normal)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(filledStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: .Selected)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.setImage(filledStarImage, &lt;span class=&quot;attribute&quot;&gt;forState&lt;/span&gt;: [.Highlighted, .Selected])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.adjustsImageWhenHighlighted = &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.addTarget(self, &lt;span class=&quot;attribute&quot;&gt;action&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;ratingButtonTapped:&quot;&lt;/span&gt;, &lt;span class=&quot;attribute&quot;&gt;forControlEvents&lt;/span&gt;: .TouchDown)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ratingButtons += [button]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        addSubview(button)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;实现Button动作&quot;&gt;&lt;a href=&quot;#实现Button动作&quot; class=&quot;headerlink&quot; title=&quot;实现Button动作&quot;&gt;&lt;/a&gt;实现Button动作&lt;/h3&gt;&lt;p&gt;用户需要点击星星图标来作出选择，需要重新设计rratingButtonTapped(_:)方法&lt;/p&gt;
&lt;p&gt;在RatingControl.swift代码区域添加updateButtonSelectionStates()方法&lt;br&gt;&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func updateButtonSelectionStates() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.enumerate() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// If the index of a button is less than the rating, that button shouldn&#39;t be selected.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;selector-tag&quot;&gt;button&lt;/span&gt;&lt;span class=&quot;selector-class&quot;&gt;.selected&lt;/span&gt; = index &amp;lt; rating&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在ratingButtonTapped(_:)方法和layoutSubviews()中分别调用这个方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ratingButtonTapped&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(button: UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    rating = ratingButtons.indexOf(button)! + &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    updateButtonSelectionStates()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;layoutSubviews&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set the button&#39;s width and height to a square the size of the frame&#39;s height.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; buttonSize = &lt;span class=&quot;type&quot;&gt;Int&lt;/span&gt;(frame.size.height)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; buttonFrame = &lt;span class=&quot;type&quot;&gt;CGRect&lt;/span&gt;(x: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, width: buttonSize, height: buttonSize)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Offset each button&#39;s origin by the length of the button plus some spacing.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (index, button) &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; ratingButtons.&lt;span class=&quot;built_in&quot;&gt;enumerate&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        buttonFrame.origin.x = &lt;span class=&quot;type&quot;&gt;CGFloat&lt;/span&gt;(index * (buttonSize + &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        button.frame = buttonFrame&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    updateButtonSelectionStates()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在// MARK: Properties区域下，更新rating属性&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; rating&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;didSet &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    setNeedsLayout()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;增加Spacing和Number属性&quot;&gt;&lt;a href=&quot;#增加Spacing和Number属性&quot; class=&quot;headerlink&quot; title=&quot;增加Spacing和Number属性&quot;&gt;&lt;/a&gt;增加Spacing和Number属性&lt;/h3&gt;&lt;p&gt;在// MARK: Properties下增加两个属性,&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; spacing&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;variable&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; stars&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;将比率控制和视图控制器建立连接&quot;&gt;&lt;a href=&quot;#将比率控制和视图控制器建立连接&quot; class=&quot;headerlink&quot; title=&quot;将比率控制和视图控制器建立连接&quot;&gt;&lt;/a&gt;将比率控制和视图控制器建立连接&lt;/h3&gt;&lt;p&gt;将canvas中的rating control拖拽至 ViewController.swift中photoImageView 属性下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;设置如图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;清理工程项目&quot;&gt;&lt;a href=&quot;#清理工程项目&quot; class=&quot;headerlink&quot; title=&quot;清理工程项目&quot;&gt;&lt;/a&gt;清理工程项目&lt;/h3&gt;&lt;p&gt;现在快要完成app的设计了，但是现在需要对之前的工作做一个清理，因为app实现了更高级的功能，而之前的功能我们需要删除一些。&lt;/p&gt;
&lt;p&gt;选择Storyboard 中的Set Default Label Text 按钮，按下 Delete键去删除它&lt;/p&gt;
&lt;p&gt;点击outline目录下的Stack View对象，打开Attributes inspector.找到Alignment标签，将其设置为Center，stack view中的元素就会水平居中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;打开ViewController.swift，删除setDefaultLabelText(_:)方法&lt;/p&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/5-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;创建自定义视图&quot;&gt;&lt;a href=&quot;#创建自定义视图&quot; class=&quot;headerlink&quot; title=&quot;创建自定义视图&quot;&gt;&lt;/a&gt;创建自定义视图&lt;/h3&gt;&lt;p&gt;点击File &amp;gt; New &amp;gt; File ，选择ios下的source选项，选择Cocoa
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>四. 编写视图控制器</title>
    <link href="http://ios-app.idup.club/2015/12/04/4-Work-with-view-controllers/"/>
    <id>http://ios-app.idup.club/2015/12/04/4-Work-with-view-controllers/</id>
    <published>2015-12-04T03:58:26.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;增加一张Meal图片&quot;&gt;&lt;a href=&quot;#增加一张Meal图片&quot; class=&quot;headerlink&quot; title=&quot;增加一张Meal图片&quot;&gt;&lt;/a&gt;增加一张Meal图片&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个 image view放入stack view中的button下面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在工具栏中选择 Size inspector菜单，将Intrinsic Size标签设置为Placeholder，并将宽度和高度设置为320&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;给图片增加约束条件，Pin菜单中勾选 Aspect Ratio.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt; 在工具栏的Attributes inspector菜单下找到Interaction标签，勾选User Interaction Enabled。&lt;/p&gt;
&lt;h3 id=&quot;展示默认图片&quot;&gt;&lt;a href=&quot;#展示默认图片&quot; class=&quot;headerlink&quot; title=&quot;展示默认图片&quot;&gt;&lt;/a&gt;展示默认图片&lt;/h3&gt;&lt;p&gt;在project navigator中选择Assets.xcassets。在左底角点击+符号，把图片拖入image set中的2*槽中，Attributes inspector中选择image，在列表中选择刚才添加的图片defaultPhoto。运行模拟器。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;连接代码与图片&quot;&gt;&lt;a href=&quot;#连接代码与图片&quot; class=&quot;headerlink&quot; title=&quot;连接代码与图片&quot;&gt;&lt;/a&gt;连接代码与图片&lt;/h3&gt;&lt;p&gt;拖拽image view到ViewController.swift代码区，name为photoImageView&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建手势识别&quot;&gt;&lt;a href=&quot;#创建手势识别&quot; class=&quot;headerlink&quot; title=&quot;创建手势识别&quot;&gt;&lt;/a&gt;创建手势识别&lt;/h3&gt;&lt;p&gt;从Object Library中拖拽一个Object Library，将其放在image view上添加一个点击手势识别。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-7.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;将手势识别连接到代码区&quot;&gt;&lt;a href=&quot;#将手势识别连接到代码区&quot; class=&quot;headerlink&quot; title=&quot;将手势识别连接到代码区&quot;&gt;&lt;/a&gt;将手势识别连接到代码区&lt;/h3&gt;&lt;p&gt;拖拽 gesture recognizer到ViewController.swift代码区，name设置为selectImageFromPhotoLibrary，type设置为UITapGestureRecognizer&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-8.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-9.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;创建图像选择器来响应用户点击&quot;&gt;&lt;a href=&quot;#创建图像选择器来响应用户点击&quot; class=&quot;headerlink&quot; title=&quot;创建图像选择器来响应用户点击&quot;&gt;&lt;/a&gt;创建图像选择器来响应用户点击&lt;/h3&gt;&lt;p&gt;在ViewController.swift代码区中修改相应代码&lt;br&gt;&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UITextFieldDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UIImagePickerControllerDelegate&lt;/span&gt;, &lt;span class=&quot;type&quot;&gt;UINavigationControllerDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;修改 selectImageFromPhotoLibrary(_:)方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;selectImageFromPhotoLibrary&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender: UITapGestureRecognizer)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Hide the keyboard.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField.resignFirstResponder()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// UIImagePickerController is a view controller that lets a user pick media from their photo library.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; imagePickerController = &lt;span class=&quot;type&quot;&gt;UIImagePickerController&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Only allow photos to be picked, not taken.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePickerController.sourceType = .&lt;span class=&quot;type&quot;&gt;PhotoLibrary&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Make sure ViewController is notified when the user picks an image.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    imagePickerController.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    presentViewController(imagePickerController, animated: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实现两个委托方法&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerControllerDidCancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerController&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;imagePickerControllerDidCancel(_:) 方法内容&lt;br&gt;&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerControllerDidCancel&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Dismiss the picker if the user canceled.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;imagePickerController(_:didFinishPickingMediaWithInfo) 方法内容&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;imagePickerController&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [String : AnyObject])&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// The info dictionary contains multiple representations of the image, and this uses the original.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; selectedImage = info[&lt;span class=&quot;type&quot;&gt;UIImagePickerControllerOriginalImage&lt;/span&gt;] &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt;! &lt;span class=&quot;type&quot;&gt;UIImage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Set photoImageView to display the selected image.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    photoImageView.image = selectedImage&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Dismiss the picker.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    dismissViewControllerAnimated(&lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, completion: &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-10.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;从电脑中向模拟器中拖拽图片，图片就会被添加进模拟器中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-11.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-12.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击image view,选择向模拟器中添加的图片&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/4-13.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;增加一张Meal图片&quot;&gt;&lt;a href=&quot;#增加一张Meal图片&quot; class=&quot;headerlink&quot; title=&quot;增加一张Meal图片&quot;&gt;&lt;/a&gt;增加一张Meal图片&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个 image view放入stack
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>三. 连接界面与代码</title>
    <link href="http://ios-app.idup.club/2015/12/04/3-Connect-the-UI-to-code/"/>
    <id>http://ios-app.idup.club/2015/12/04/3-Connect-the-UI-to-code/</id>
    <published>2015-12-04T03:18:57.000Z</published>
    <updated>2016-03-07T04:24:13.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;为UI元素创建Outlets&quot;&gt;&lt;a href=&quot;#为UI元素创建Outlets&quot; class=&quot;headerlink&quot; title=&quot;为UI元素创建Outlets&quot;&gt;&lt;/a&gt;为UI元素创建Outlets&lt;/h3&gt;&lt;p&gt;点击toolbar中的Assistant按钮，将assistant editor从Preview状态转换为Automatic状态。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-1.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在代码区找到&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在这行下添加标记,这个标记并没有什么用处，主要用来提供一些有用的文本信息&lt;/p&gt;
&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Properties&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在storyboard中选择text field,按住control键将它拖拽到代码区刚才添加的标记下面一行&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在出现的对话框中输入nameTextField&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-3.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;点击链接，在代码区出现如下代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBOutlet&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; nameTextField: &lt;span class=&quot;type&quot;&gt;UITextField&lt;/span&gt;!&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;以相同方式将label拖拽到代码区&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-4.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;定义执行操作&quot;&gt;&lt;a href=&quot;#定义执行操作&quot; class=&quot;headerlink&quot; title=&quot;定义执行操作&quot;&gt;&lt;/a&gt;定义执行操作&lt;/h3&gt;&lt;p&gt;在 ViewController.swift代码区域中，在最后一个 } 前添加&lt;/p&gt;
&lt;figure class=&quot;highlight 1c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// MARK: Actions&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;将Set Default Label Text按钮拖拽至标记下面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-5.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;在方法中添加代码&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;@IBAction&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;setDefaultLabelText&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(sender:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   UIButton)&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mealNameLabel.text = &lt;span class=&quot;string&quot;&gt;&quot;Default Text&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;标签值被修改&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/3-6.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;获取用户输入&quot;&gt;&lt;a href=&quot;#获取用户输入&quot; class=&quot;headerlink&quot; title=&quot;获取用户输入&quot;&gt;&lt;/a&gt;获取用户输入&lt;/h3&gt;&lt;p&gt;采用UITextFieldDelegate协议，在UIViewController后添加UITextFieldDelegate&lt;/p&gt;
&lt;figure class=&quot;highlight kotlin&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;ViewController&lt;/span&gt;: &lt;span class=&quot;type&quot;&gt;UIViewController&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;type&quot;&gt;UITextFieldDelegate &amp;#123;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;设置ViewController作为nameTextField的委托, 对viewDidLoad()修改&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;viewDidLoad&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;.viewDidLoad()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the text field’s user input through delegate callbacks.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    nameTextField.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;实现UITextFieldDelegate协议方法textFieldShouldReturn(_:) 和 textFieldDidEndEditing(_:)&lt;/p&gt;
&lt;figure class=&quot;highlight swift&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;textFieldShouldReturn&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(textField: UITextField)&lt;/span&gt;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;type&quot;&gt;Bool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Hide the keyboard.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    textField.resignFirstResponder()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight mel&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;func textFieldDidEndEditing(&lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;: UITextField) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mealNameLabel.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;textField&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;text&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;运行模拟器查看结果&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;为UI元素创建Outlets&quot;&gt;&lt;a href=&quot;#为UI元素创建Outlets&quot; class=&quot;headerlink&quot; title=&quot;为UI元素创建Outlets&quot;&gt;&lt;/a&gt;为UI元素创建Outlets&lt;/h3&gt;&lt;p&gt;点击toolbar中的Assistant按钮
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>二. 创建基本用户界面</title>
    <link href="http://ios-app.idup.club/2015/12/04/2-Build-a-basic-UI/"/>
    <id>http://ios-app.idup.club/2015/12/04/2-Build-a-basic-UI/</id>
    <published>2015-12-04T03:11:31.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;h3 id=&quot;打开Storyboard&quot;&gt;&lt;a href=&quot;#打开Storyboard&quot; class=&quot;headerlink&quot; title=&quot;打开Storyboard&quot;&gt;&lt;/a&gt;打开Storyboard&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2-1.png&quot; alt=&quot;打开Storyboard&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;添加文本框（Text-Field）&quot;&gt;&lt;a href=&quot;#添加文本框（Text-Field）&quot; class=&quot;headerlink&quot; title=&quot;添加文本框（Text Field）&quot;&gt;&lt;/a&gt;添加文本框（Text Field）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个文本框到Storyboard的 scene中,重新设置文本框大小。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-2.png&quot; alt=&quot;添加文本框&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设置文本占位符&quot;&gt;&lt;a href=&quot;#设置文本占位符&quot; class=&quot;headerlink&quot; title=&quot;设置文本占位符&quot;&gt;&lt;/a&gt;设置文本占位符&lt;/h3&gt;&lt;p&gt;打开工具框中的 Attributes inspector，找到Placeholder标签，在其中输入Enter meal name。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-3.png&quot; alt=&quot;设置占位符&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;设置文本框键盘&quot;&gt;&lt;a href=&quot;#设置文本框键盘&quot; class=&quot;headerlink&quot; title=&quot;设置文本框键盘&quot;&gt;&lt;/a&gt;设置文本框键盘&lt;/h3&gt;&lt;p&gt;在Attributes inspector中找到Return Key标签，将其设置为Done,并在Auto-enable Return Key复选框上打上勾。&lt;/p&gt;
&lt;h3 id=&quot;添加标签（Label）&quot;&gt;&lt;a href=&quot;#添加标签（Label）&quot; class=&quot;headerlink&quot; title=&quot;添加标签（Label）&quot;&gt;&lt;/a&gt;添加标签（Label）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个label到scene中，双击它，在其中输入Meal Name.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-4.png&quot; alt=&quot;添加标签&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;添加按钮（Button）&quot;&gt;&lt;a href=&quot;#添加按钮（Button）&quot; class=&quot;headerlink&quot; title=&quot;添加按钮（Button）&quot;&gt;&lt;/a&gt;添加按钮（Button）&lt;/h3&gt;&lt;p&gt;从Object library中拖拽一个button到scene中，双击它，在其中输入Set Default Label Text.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-5.png&quot; alt=&quot;添加按钮&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;自动布局&quot;&gt;&lt;a href=&quot;#自动布局&quot; class=&quot;headerlink&quot; title=&quot;自动布局&quot;&gt;&lt;/a&gt;自动布局&lt;/h3&gt;&lt;p&gt;在按住shift的情况下点击label,button,和textfield.点击canvas底部的Stack按钮&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-6.png&quot; alt=&quot;Stack&quot;&gt;&lt;/p&gt;
&lt;p&gt;Xcode将会将所有UI元素包裹在一个stack view中&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-7.png&quot; alt=&quot;Stack&quot;&gt;&lt;/p&gt;
&lt;p&gt;在canvas的右下角，打开Pin菜单，可以修改界面的布局位置&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-8.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;修改完成后&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-9.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;需要调整text field的大小，在scene中选择text field,打开Pin菜单，将右边的box中输入0.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-10.png&quot; alt=&quot;Pin&quot;&gt;&lt;/p&gt;
&lt;p&gt;在工具栏中选择Size inspector按钮,将标签Intrinsic Size的属性设置为Placeholder。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-11.png&quot; alt=&quot;size&quot;&gt;&lt;/p&gt;
&lt;p&gt;最终的结果&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-12.png&quot; alt=&quot;ui&quot;&gt;&lt;/p&gt;
&lt;p&gt;运行模拟器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/2-13.png&quot; alt=&quot;simulator&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;打开Storyboard&quot;&gt;&lt;a href=&quot;#打开Storyboard&quot; class=&quot;headerlink&quot; title=&quot;打开Storyboard&quot;&gt;&lt;/a&gt;打开Storyboard&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/2-1.png&quot; alt
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>一. 创建工程</title>
    <link href="http://ios-app.idup.club/2015/12/04/1-Jump-Right-in/"/>
    <id>http://ios-app.idup.club/2015/12/04/1-Jump-Right-in/</id>
    <published>2015-12-03T16:19:45.000Z</published>
    <updated>2016-03-07T03:04:10.000Z</updated>
    
    <content type="html">&lt;p&gt;开始开发iOS应用（Start Developing iOS Apps）是学习iPhone和iPad应用开发的起点。&lt;/p&gt;
&lt;h3 id=&quot;关于本课程&quot;&gt;&lt;a href=&quot;#关于本课程&quot; class=&quot;headerlink&quot; title=&quot;关于本课程&quot;&gt;&lt;/a&gt;关于本课程&lt;/h3&gt;&lt;p&gt;通过本课程，你将开发一个简单的饮食追踪应用FoodTracker。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-1.png&quot; alt=&quot;FoodTracker App&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;获取工具&quot;&gt;&lt;a href=&quot;#获取工具&quot; class=&quot;headerlink&quot; title=&quot;获取工具&quot;&gt;&lt;/a&gt;获取工具&lt;/h3&gt;&lt;p&gt;用当前最新的技术进行iOS应用开发首先需要相应的软硬件设备，包括一台Mac电脑（安装OS X 10.10或更新版本的操作系统）和最新版本的Xcode。Xcode可免费从App Store下载。&lt;/p&gt;
&lt;h3 id=&quot;创建工程&quot;&gt;&lt;a href=&quot;#创建工程&quot; class=&quot;headerlink&quot; title=&quot;创建工程&quot;&gt;&lt;/a&gt;创建工程&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;/images/1-2.png&quot; alt=&quot;新建工程&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-3.png&quot; alt=&quot;选择工程类型&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-4.png&quot; alt=&quot;输入工程参数&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/1-5.png&quot; alt=&quot;创建成功&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;开始开发iOS应用（Start Developing iOS Apps）是学习iPhone和iPad应用开发的起点。&lt;/p&gt;
&lt;h3 id=&quot;关于本课程&quot;&gt;&lt;a href=&quot;#关于本课程&quot; class=&quot;headerlink&quot; title=&quot;关于本课程&quot;&gt;&lt;/a&gt;关于本课程
    
    </summary>
    
    
  </entry>
  
</feed>
